{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}
{{ block.super }}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
<style>
    #container, #header, #nav-sidebar, #container *, #header *, #nav-sidebar * { box-sizing: content-box !important; }
    #nav-sidebar { position: sticky !important; top: 0 !important; max-height: 100vh !important; overflow-x: hidden !important; overflow-y: auto !important; width: 275px !important; flex-shrink: 0 !important; }
    #nav-sidebar ul { padding-left: 0; margin-bottom: 0; list-style: none; }
    #nav-sidebar li { list-style: none; }
    #content, #content * { box-sizing: border-box !important; }
    #content { background-color: #f4f7f6 !important; color: #333 !important; min-height: 100vh; padding: 20px !important; }

    .page-header { margin-bottom: 32px; }
    .page-header h1 { font-size: 1.6rem; font-weight: 800; color: #1B2838; display: flex; align-items: center; gap: 10px; }

    .branch-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 24px; margin-bottom: 40px; }
    .branch-card { background: #fff; border: 2px solid #e8e8e8; border-radius: 16px; padding: 28px 24px; transition: all 0.25s ease; display: flex; flex-direction: column; align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.04); }
    .branch-card:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0,0,0,0.1); border-color: #C9A227; }
    .branch-icon { width: 56px; height: 56px; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 1.6rem; margin-bottom: 16px; }
    .branch-icon.cafe { background: linear-gradient(135deg, #e8f5e9, #c8e6c9); }
    .branch-icon.alt { background: linear-gradient(135deg, #e3f2fd, #bbdefb); }
    .branch-name { font-size: 1.15rem; font-weight: 700; color: #1B2838; margin-bottom: 20px; text-align: center; }

    .btn-group-v { width: 100%; display: flex; flex-direction: column; gap: 8px; }
    .btn-rf { display: flex; align-items: center; gap: 8px; padding: 12px 16px; border-radius: 10px; font-size: 0.85rem; font-weight: 600; text-decoration: none !important; transition: all 0.15s; border: none; cursor: pointer; text-align: left; }
    .btn-rf i { font-size: 1rem; }
    .btn-rf-primary { background: #C9A227; color: #fff !important; }
    .btn-rf-primary:hover { background: #b8931f; color: #fff !important; transform: translateX(2px); }
    .btn-rf-success { background: #28a745; color: #fff !important; }
    .btn-rf-success:hover { background: #218838; color: #fff !important; transform: translateX(2px); }
    .btn-rf-disabled { background: #f0f0f0; color: #aaa !important; cursor: not-allowed; pointer-events: none; }
    .badge-soon { background: #C9A227; color: #fff !important; font-size: 0.6rem; padding: 2px 8px; border-radius: 10px; margin-left: auto; font-weight: 700; }
    .divider-label { font-size: 0.7rem; color: #999; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 700; margin: 8px 0 4px; padding-left: 4px; }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="page-header">
        <h1><span style="background: rgba(201,162,39,0.12); padding: 6px; border-radius: 10px;">üìä</span> –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</h1>
        <p class="text-muted small mt-1 mb-0">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–ª–∏ –∏—Å—Ç–æ—Ä–∏—é –º–∏–≥—Ä–∞—Ü–∏–∏ —Ñ–∏–ª–∏–∞–ª–∞</p>
    </div>
    <div class="branch-grid">
        {% for branch in branches %}
        <div class="branch-card">
            <div class="branch-icon {% cycle 'cafe' 'alt' %}">{% if forloop.counter|divisibleby:2 %}üìç{% else %}üè†{% endif %}</div>
            <div class="branch-name">{{ branch.name }}</div>
            <div class="btn-group-v">
                <a href="{% url 'rf-detail-statistics' id=branch.id %}" class="btn-rf btn-rf-primary"><i class="bi bi-grid-3x3-gap"></i> RF-–∞–Ω–∞–ª–∏–∑ (—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)</a>
                <a href="{% url 'rf-migration-statistics' id=branch.id %}" class="btn-rf btn-rf-success"><i class="bi bi-clock-history"></i> –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏</a>
                <div class="divider-label">–î–æ—Å—Ç–∞–≤–∫–∞</div>
                <a href="{% url 'delivery-rf-statistics' id=branch.id %}" class="btn-rf btn-rf-primary"><i class="bi bi-truck"></i> RF-–∞–Ω–∞–ª–∏–∑ –¥–æ—Å—Ç–∞–≤–∫–∏</a>
                <a href="{% url 'delivery-rf-migration' id=branch.id %}" class="btn-rf btn-rf-success"><i class="bi bi-clock-history"></i> –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏</a>
            </div>
        </div>
        {% empty %}
        <div class="text-center py-5" style="grid-column: 1/-1;"><div class="text-muted fs-2 mb-3">üèöÔ∏è</div><h5 class="text-muted">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</h5></div>
        {% endfor %}
    </div>
</div>
{% endblock %}
